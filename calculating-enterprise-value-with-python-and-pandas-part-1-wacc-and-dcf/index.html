<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/smirnov-am.github.io"
        },
        "articleSection" : "post",
        "name" : "Calculating enterprise value with Python and Pandas (part 2). WACC and DCF",
        "headline" : "Calculating enterprise value with Python and Pandas (part 2). WACC and DCF",
        "description" : "The latests documentation for pyfinmod is available here https:\/\/pyfinmod.readthedocs.io\/en\/latest\/\n The weighted average cost of capital (WACC) is used as the discount rate for a firm’s anticipated free cash flows (FCFs) The formula is the following:\n  whereE = market value of the firm’s equity D = market value of the firm’s debtTc = firm’s corporate tax raterE = firm’s cost of equityrD = firm’s cost of debt",
        "inLanguage" : "en-US",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2019",
        "datePublished": "2019-07-07 07:01:04 \x2b0000 UTC",
        "dateModified" : "2019-07-07 07:01:04 \x2b0000 UTC",
        "url" : "https:\/\/smirnov-am.github.io\/calculating-enterprise-value-with-python-and-pandas-part-1-wacc-and-dcf\/",
        "wordCount" : "763",
        "keywords" : [ "Financial Modelling","Python","Blog" ]
    }
    </script>

<title>Calculating enterprise value with Python and Pandas (part 2). WACC and DCF | Alexey Smirnov</title>

<meta property='og:title' content='Calculating enterprise value with Python and Pandas (part 2). WACC and DCF - Alexey Smirnov'>
<meta property='og:description' content='The latests documentation for pyfinmod is available here https://pyfinmod.readthedocs.io/en/latest/
 The weighted average cost of capital (WACC) is used as the discount rate for a firm’s anticipated free cash flows (FCFs) The formula is the following:
  whereE = market value of the firm’s equity D = market value of the firm’s debtTc = firm’s corporate tax raterE = firm’s cost of equityrD = firm’s cost of debt'>
<meta property='og:url' content='https://smirnov-am.github.io/calculating-enterprise-value-with-python-and-pandas-part-1-wacc-and-dcf/'>
<meta property='og:site_name' content='Alexey Smirnov'>
<meta property='og:type' content='article'><meta property='og:image' content='https://smirnov-am.github.io/images/2019/07/phyton-i-reka.png'><meta property='article:published_time' content='2019-07-07T07:01:04Z'/><meta property='article:modified_time' content='2019-07-07T07:01:04Z'/><meta name='twitter:card' content='summary_large_image'><meta name='twitter:site' content='@'><meta name='twitter:creator' content='@'>


<link href="https://smirnov-am.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Alexey Smirnov" />

<link rel="stylesheet" href="https://smirnov-am.github.io/css/style.css"/><link rel="apple-touch-icon" sizes="180x180" href="https://smirnov-am.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://smirnov-am.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://smirnov-am.github.io/favicon-16x16.png">
<link rel="manifest" href="https://smirnov-am.github.io/site.webmanifest">
<link rel="mask-icon" href="https://smirnov-am.github.io/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="https://smirnov-am.github.io/calculating-enterprise-value-with-python-and-pandas-part-1-wacc-and-dcf/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<meta name="google-site-verification" content="LxHvTgaBdcBpIRtJMFKFiIvx5Mm45WC1z1S57O6O5O8" />
</head>
<body>
<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="https://smirnov-am.github.io">
          <h1 id="nav-heading" class="title is-4">Alexey Smirnov</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="github" href='https://github.com/smirnov-am'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/smirnovam'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="rss" href='https://smirnov-am.github.io/index.xml'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
  <script src="https://smirnov-am.github.io/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="https://smirnov-am.github.io/tags/financial-modelling">#Financial Modelling</a>



  
  | <a class="subtitle is-6" href="https://smirnov-am.github.io/tags/python">#Python</a>
  

      
    </div>
    <h2 class="subtitle is-6">July 7, 2019</h2>
    <h1 class="title">Calculating enterprise value with Python and Pandas (part 2). WACC and DCF</h1>
    
    <div class="content">
      

<blockquote>
<p>The latests documentation for <code>pyfinmod</code> is available here <a href="https://pyfinmod.readthedocs.io/en/latest/" target="_blank">https://pyfinmod.readthedocs.io/en/latest/</a></p>
</blockquote>

<p>The weighted average cost of capital (WACC) is used as the discount rate for a firm’s anticipated free cash flows (FCFs) The formula is the following:</p>

<figure>
    <img src="https://smirnov-am.github.io/content/images/2019/07/wacc_formula.png"/> 
</figure>


<p>whereE = market value of the firm’s equity D = market value of the firm’s debtTc = firm’s corporate tax raterE = firm’s cost of equityrD = firm’s cost of debt</p>

<p>There are some difficulties in calculating certain parts:<strong>1.</strong> Firm’s cost of equity rE has two approaches to it: Gordon model and capital asset pricing model (CAPM).</p>

<ul>
<li>The Gordon model calculates the cost of equity based on the anticipated cash flows paid to the shareholders of the firm</li>
<li>The capital asset pricing model (CAPM) uses the correlation between firm&rsquo;s equity return and a broad market portfolio.</li>
</ul>

<p><strong>2.</strong> Cost of debt rD, the anticipated future cost of the firm’s borrowing.</p>

<ul>
<li>The cost of debt rD is computed  dividing current net interestpayments by average net debt</li>
<li>Alternatively, it can be obtained from an yield curve</li>
</ul>

<h3 id="equity-e">Equity, E</h3>

<p>For a public company E equals its market cap:</p>

<pre><code class="language-python">from pyfinmod.yahoo_finance import YahooFinanceParser
parser = YahooFinanceParser('AAPL')
parser.get_value('Market Cap')
</code></pre>

<h3 id="debt-d">Debt, D</h3>

<p>A common approximation for this number  is to take the balance sheet value of the <strong>firm’s debt</strong> minus the value of the <strong>firm’s cash balances</strong> minus the value of its<strong>marketable securities</strong>.</p>

<pre><code class="language-python">from pyfinmod.wacc import get_debt
parser = YahooFinanceParser('AAPL')
df = parser.get_dataframe('balance-sheet')
get_debt(df)
</code></pre>

<h3 id="tax-rate">Tax Rate</h3>

<p>The <strong>Income tax expense</strong> and <strong>Income before taxes</strong> can be found in the income statement. The tax rate is equal to the quotient of the two:</p>

<pre><code class="language-python">from pyfinmod.wacc import get_tax_rate
parser = YahooFinanceParser('AAPL')
df = parser.get_dataframe('income-statement')
get_tax_rate(df)
</code></pre>

<h3 id="cost-of-debt">Cost of Debt</h3>

<p>I&rsquo;ll cover basic calculation which uses  interest paid value from the income statement (called Interest Expense in Yahoo Finance, if I&rsquo;m not mistaken) and net debt taken from the balance sheet. In contrast to debt value from the previous section this one subtract cash and short term investments from the sum of short- and long-term debt.To get cost of debt a current year&rsquo;s paid interest is divided by average net debt from this and previous year.</p>

<pre><code class="language-python">from pyfinmod.wacc import get_cost_of_debt
balance_sheet = parser.get_dataframe('balance-sheet')
income_statement = parser.get_dataframe('income-statement')
get_cost_of_debt(balance_sheet, income_statement)
</code></pre>

<p>Another approach is to get an yield of bonds issues by other companies that have the same rating (Fitch, S&amp;P), treat yield as a function of time to maturity of the bond. Then the firm&rsquo;s debt is assumed to have a certain time to maturity as well. The cost of debt can be obtained by applying regression to this function.</p>

<h3 id="cost-of-equity">Cost of equity</h3>

<p>The most widely used approach is the CAMP model. The classic CAPM formula uses a security market line (SML) equation that ignores taxes:</p>

<figure>
    <img src="https://smirnov-am.github.io/content/images/2019/07/latex_aa96e3d999012febe6c09b8437564a0f.png"/> 
</figure>


<ul>
<li>rF equal to the risk-free interest rate in the economy (for example, the yield on Treasury bills)</li>
<li>E(rM) equal to the historic average of the market return, defined as the average return of a broad-based market portfolio</li>
</ul>

<blockquote>
<p>I&rsquo;ll leave it as parameters as I&rsquo;d like to move to more interesting topics</p>
</blockquote>

<p>The beta value can be easily accessed from the Yahoo finance summary page. So the cost of equity can be calculated as follows:</p>

<pre><code>from pyfinmod.yahoo_finance import YahooFinanceParser
parser = YahooFinanceParser('AAPL')
beta = parser.get_value('Beta (3Y Monthly)')

from pyfinmod.wacc import get_cost_of_equity
get_cost_of_equity(beta, risk_free_interest_rate = 0.02, market_return = 0.08)
</code></pre>

<h3 id="putting-it-all-together-for-wacc">Putting it all together for WACC</h3>

<p>Everything&rsquo;s ready for calculating WACC. The problem is that some parameters are time series (i.e. debt) and some are just numbers (i.e. equity and cost of equity). It would be more correct to obtain historical data for equity as well, of course. I&rsquo;ll just assume they are the same for all periods and return the mean value of WACC.</p>

<pre><code class="language-python">from pyfinmod.yahoo_finance import YahooFinanceParser
from pyfinmod.wacc import wacc
parser = YahooFinanceParser('AAPL')
e = parser.get_value('Market Cap')
beta = parser.get_value('Beta (3Y Monthly)')
income_statement = parser.get_dataframe('income-statement')
balance_sheet = parser.get_dataframe('balance-sheet')
aapl_wacc = wacc(e, balance_sheet, income_statement, beta,
                 risk_free_interest_rate=0.02,
                 market_return=0.08)
</code></pre>

<p>The result for AAPL is 8.18%.</p>

<h3 id="dcf">DCF</h3>

<p>So now we have historical free cash flows and WACC and we need to project them into the future. But to what extent? Let&rsquo;s assume 2 growth factors:</p>

<ul>
<li>optimistic short term (year 1-5)</li>
<li>pessimistic long term</li>
</ul>

<p>Then we take the latest known FCF value and project it by incrementing with short term growth rate until year 5. The rest will be represented by terminal value - FCF at year 5 multiplied by pessimistic growth rate and discounted by WACC.</p>

<pre><code class="language-python">from pyfinmod.ev import dcf
dcf(fcf, aapl_wacc, short_term_growth=0.08, long_term_growth=0.04)
</code></pre>

<p>The result for AAPL is ~3.2T which is 3x its current market cap (assuming 8% growth in the next 5 years and 4% growth afterward)</p>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="https://smirnov-am.github.io/basic-financial-calculations-with-python-and-pandas/">Basic Financial Calculations with Python and Pandas</a></li>
	
	<li><a href="https://smirnov-am.github.io/unittesting-decorators/">Unittesting decorators</a></li>
	
	<li><a href="https://smirnov-am.github.io/calculating-enterprise-value-with-python-and-pandas-part-1-fcf/">Calculating enterprise value with Python and Pandas (part 1). FCF</a></li>
	
	<li><a href="https://smirnov-am.github.io/streaming-timeseries-with-flask-and-plotly/">Streaming timeseries with Flask and Plotly</a></li>
	
	<li><a href="https://smirnov-am.github.io/background-jobs-with-flask/">Background jobs with Flask</a></li>
	
</ul>
</div>
      
    </div>
    
  </div>
</section>

    <script src="https://smirnov-am.github.io/js/copycode.js"></script>



<section class="section">
  <div class="container has-text-centered">
    <p>&copy; Alexey Smirnov 2020</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-107429956-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>
</html>

