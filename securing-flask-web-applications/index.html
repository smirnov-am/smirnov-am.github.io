<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Securing Flask web applications</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=e6220510ab" />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="canonical" href="https://smirnov-am.github.io/securing-flask-web-applications/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://smirnov-am.github.io/securing-flask-web-applications/amp/" />
    
    <meta property="og:site_name" content="smirnov-am.github.io" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Securing Flask web applications" />
    <meta property="og:description" content="I&#x27;ve just recently finished a web security training and in this post I&#x27;d like to
investigate security mechanisms of my beloved web framework - Flask.
I&#x27;ll go through different types of possible vulnerabilities and the way they can
be mitigated.

XSS
Cross-Site Scripting (XSS) attacks are a type of injection, in which malicious
scripts are injected into otherwise benign and trusted websites. source
[https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29]

Exploit
Consider a form asking fo" />
    <meta property="og:url" content="https://smirnov-am.github.io/securing-flask-web-applications/" />
    <meta property="og:image" content="https://smirnov-am.github.io/content/images/2019/04/flask11.jpg" />
    <meta property="article:published_time" content="2018-07-11T17:26:00.000Z" />
    <meta property="article:modified_time" content="2019-04-27T17:30:43.000Z" />
    <meta property="article:tag" content="python" />
    <meta property="article:tag" content="Flask" />
    <meta property="article:tag" content="Security" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Securing Flask web applications" />
    <meta name="twitter:description" content="I&#x27;ve just recently finished a web security training and in this post I&#x27;d like to
investigate security mechanisms of my beloved web framework - Flask.
I&#x27;ll go through different types of possible vulnerabilities and the way they can
be mitigated.

XSS
Cross-Site Scripting (XSS) attacks are a type of injection, in which malicious
scripts are injected into otherwise benign and trusted websites. source
[https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29]

Exploit
Consider a form asking fo" />
    <meta name="twitter:url" content="https://smirnov-am.github.io/securing-flask-web-applications/" />
    <meta name="twitter:image" content="https://smirnov-am.github.io/content/images/2019/04/flask11.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Alexey Smirnov" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="python, Flask, Security" />
    <meta property="og:image:width" content="1280" />
    <meta property="og:image:height" content="720" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "smirnov-am.github.io",
        "logo": {
            "@type": "ImageObject",
            "url": "https://smirnov-am.github.io/favicon.ico",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Alexey Smirnov",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/f3f61e69a3bdf7419f19cb1be356c0b1?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "https://smirnov-am.github.io/author/alexey/",
        "sameAs": []
    },
    "headline": "Securing Flask web applications",
    "url": "https://smirnov-am.github.io/securing-flask-web-applications/",
    "datePublished": "2018-07-11T17:26:00.000Z",
    "dateModified": "2019-04-27T17:30:43.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://smirnov-am.github.io/content/images/2019/04/flask11.jpg",
        "width": 1280,
        "height": 720
    },
    "keywords": "python, Flask, Security",
    "description": "I&#x27;ve just recently finished a web security training and in this post I&#x27;d like to\ninvestigate security mechanisms of my beloved web framework - Flask.\nI&#x27;ll go through different types of possible vulnerabilities and the way they can\nbe mitigated.\n\nXSS\nCross-Site Scripting (XSS) attacks are a type of injection, in which malicious\nscripts are injected into otherwise benign and trusted websites. source\n[https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29]\n\nExploit\nConsider a form asking fo",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://smirnov-am.github.io/"
    }
}
    </script>

    <meta name="generator" content="Ghost 2.21" />
    <link rel="alternate" type="application/rss+xml" title="smirnov-am.github.io" href="https://smirnov-am.github.io/rss/" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107429956-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107429956-1');
</script>

</head>
<body class="post-template tag-python tag-flask tag-security">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="https://smirnov-am.github.io">smirnov-am.github.io</a>
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="https://smirnov-am.github.io/">Home</a></li>
    <li class="nav-github" role="menuitem"><a href="https://github.com/smirnov-am">GitHub</a></li>
    <li class="nav-linkedin" role="menuitem"><a href="https://www.linkedin.com/in/smirnovam/">LinkedIn</a></li>
    <li class="nav-bookshelf" role="menuitem"><a href="https://www.goodreads.com/review/list/100768091-alex-smirnov">Bookshelf</a></li>
</ul>

    </div>
    <div class="site-nav-right">
        <div class="social-links">
        </div>
            <a class="rss-button" href="https://feedly.com/i/subscription/feed/https://smirnov-am.github.io/rss/" title="RSS" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-python tag-flask tag-security ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2018-07-11">11 July 2018</time>
                        <span class="date-divider">/</span> <a href="/tag/python/">python</a>
                </section>
                <h1 class="post-full-title">Securing Flask web applications</h1>
            </header>

            <figure class="post-full-image">
                <img
                    srcset="/content/images/size/w300/2019/04/flask11.jpg 300w,
                            /content/images/size/w600/2019/04/flask11.jpg 600w,
                            /content/images/size/w1000/2019/04/flask11.jpg 1000w,
                            /content/images/size/w2000/2019/04/flask11.jpg 2000w"
                    sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px"
                    src="/content/images/size/w2000/2019/04/flask11.jpg"
                    alt="Securing Flask web applications"
                />
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p>I've just recently finished a web security training and in this post I'd like to investigate security mechanisms of my beloved web framework - Flask.<br>I'll go through different types of possible vulnerabilities and the way they can be mitigated.</p><h2 id="xss">XSS</h2><p>Cross-Site Scripting (XSS) attacks are a type of injection, in which malicious scripts are injected into otherwise benign and trusted websites. <a href="https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29">source</a></p><h3 id="exploit">Exploit</h3><p>Consider a form asking for a user input.</p><!--kg-card-begin: code--><pre><code>&lt;form method="post" action="/"&gt;
  &lt;input type="text" name="tweet"&gt;&lt;br&gt;
  &lt;input type="submit"&gt;
&lt;/form&gt;
</code></pre><!--kg-card-end: code--><p>And a template to show tweets by other users where user input from above form passed unprocessed:</p><!--kg-card-begin: code--><pre><code>&lt;title&gt;Hello from flask twitter&lt;/title&gt;
{% for tweet in tweets %}
  &lt;h1 class={{tweet}}&gt;{{ tweet }}!&lt;/h1&gt;
  &lt;a href="{{tweet}}"&gt;Like&lt;/a&gt;
{% endfor %}
</code></pre><!--kg-card-end: code--><p>With the Flask app looking like this:</p><!--kg-card-begin: code--><pre><code>from flask import Flask, request, render_template, make_response
app = Flask(__name__)

tweets = []


@app.route('/', methods=['GET', 'POST'])
def tweet_feed():
    if request.method == 'POST':
        tweet = request.form['tweet']
        tweets.append(tweet)
    return render_template('tweet_feed.html', tweets=tweets)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5005, debug=True)
</code></pre><!--kg-card-end: code--><p>The tweet posted by user will be used as <code>h1</code> class attribute and inside the tag and also as <code>a</code> href attribute.</p><p>A hacker may post malicious code and when another users will open the page with tweets that code may be executed by their browsers:</p><ol><li><code>" onload=alert(1)</code> - if this appears in class attribute it will close the double quote and add a callback to onload event for this DOM.</li><li><code>javascript:alert(1);</code> - if this javascript URI appears in href attribute, browser will execute a code when user clicks.</li><li><code>&lt;script&gt;alert(1)&lt;/script&gt;</code> - if this appears anywhere on the page the script will be executed.</li></ol><p>The script may not just show an alert message, but for example do an AJAX call to another endpoint on this site (i.e. password change).  This allows the attacker to perform any action as the user on this website.</p><h3 id="mitigation">Mitigation</h3><p>When rendering templates Flask configures Jinja2 to automatically escape all values unless explicitly told otherwise. Auto-escaping is not enabled for all templates.<br>The following extensions for templates trigger auto-escaping: .html, .htm, .xml, .xhtml. Templates loaded from a string will have auto-escaping disabled.</p><p>So because of the above exploit using code #3 will be escaped and never executed.</p><p>Code #1 gives me <code>ERR_BLOCKED_BY_XSS_AUDITOR</code> error in Chrome Version 65.0.3325.181. This browser behavior can be manipulated by the server with <code>X-XSS-Protection</code> header <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-XSS-Protection">source</a></p><p>The only vulnerable part is href attribute in <code>a</code> tag.<br>We have a following option to mitigate</p><ul><li>do not use user input with <code>href</code></li><li>use <code>{{ url_for('endpoint')}}</code> when rendering template. This has additional benefit of automatically building proper URLs if endpoint path changes.</li><li>use  <code>Content-Security-Policy</code> header in response:</li></ul><!--kg-card-begin: code--><pre><code>@app.route('/', methods=['GET', 'POST'])
def tweet_feed():
    if request.method == 'POST':
        tweet = request.form['tweet']
        tweets.append(tweet)
    response = make_response(render_template('tweet_feed.html', tweets=tweets))
    response.headers['Content-Security-Policy'] = "default-src 'self'"
    return response
</code></pre><!--kg-card-end: code--><p>Content Security Policy (CSP) is security mechanism aimed at protecting from XSS and Clickjacking attacks. CSP allows you to specify trusted origins of loading resources such as Javascript, fonts, CSS and others. And also ban the execution of the built-in Javascript code. <a href="https://web-security.guru/en/web-security/content-security-policy">source</a></p><p><code>default-src 'self'</code> in <code>Content-Security-Policy</code> header in server response instructs browser to load and execute scripts from the same source - your server, which is identified by protocol (http/https), hostname and port triplet. It also disables inline scripts like the one from malicious code #3.</p><p>Another types of XSS are the ones where malicious code is embedded in uploaded file (text, images). I'll address them in File upload section later</p><h2 id="csrf">CSRF</h2><p>Cross-Site Request Forgery is an attack that allows an attacker to make requests to various sites under victim user. If the victim comes to a site containing a malicious code, a request is sent from her username to another service (social network) performing a destructive action.<br>Unlike XSS the malicious code is stored on hacker controlled server where user is tricked to visit.</p><h2 id="exploit-1">Exploit</h2><p>Consider a online bank transfer page. You may access it by logging beforehand with the authentication information stored in cookie files.</p><!--kg-card-begin: code--><pre><code>&lt;!doctype html&gt;
&lt;title&gt;Hello from Flask&lt;/title&gt;
&lt;h1&gt;Account balance {% raw %}${{ balance }}{% endraw %}&lt;/h1&gt;

&lt;h2&gt;New transfer&lt;/h2&gt;
&lt;form method="post" action="/"&gt;
  &lt;input type="text" name="destination_account" placeholder="Destination account"&gt;&lt;br&gt;
  &lt;input type="number" name="amount"&gt;&lt;br&gt;
  &lt;input type="submit" value="Transfer"&gt;
&lt;/form&gt;
</code></pre><!--kg-card-end: code--><p>With Flaks app looking like this:</p><!--kg-card-begin: code--><pre><code>from flask import Flask, request, render_template
app = Flask(__name__)

account_balance = 1000


@app.route('/', methods=['GET', 'POST'])
def transfer():
    global account_balance
    if request.method == 'POST':
        transferred_amount = request.form['amount']
        if transferred_amount.isdigit():
            account_balance -= int(transferred_amount)
    response = make_response(render_template('transfer.html', balance=account_balance))
    return response


if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5005, debug=True)
</code></pre><!--kg-card-end: code--><p>Now an attacker may trick you to follow a link to his website (I'm getting a lot of 'Your transaction is approved, Follow this link for details' spam messages recently).<br>When you follow the link a page with the following script loads:</p><!--kg-card-begin: code--><pre><code>&lt;form method="POST" action="http://0.0.0.0:5005/" id="hacker_form"&gt;
   &lt;input type="text" name="destination_account" value="123123123"/&gt;
   &lt;input type="number" name="amount" value="1000"/&gt;
   &lt;input type="submit" value="Transfer"&gt;
&lt;/form&gt;
&lt;script&gt;document.getElementById("hacker_form").submit()&lt;/script&gt;
</code></pre><!--kg-card-end: code--><p>So when sending this form to bank app at <a href="http://0.0.0.0:5005/">http://0.0.0.0:5005/</a> authorization cookie will be also sent along. Thus user authorized bank to transfer $10000 to Account #123123123</p><h3 id="mitigation-1">Mitigation</h3><p>I've used endpoint that changes the state of account only on POST request. That complicated hacker's task a little bit as he needs user to visit his server with malicious code.<br>If it was just GET user only needs to click the link without loading the script from hacker's server.</p><p>Another security measure is to use tokens with each account state change endpoint.<br>With every form user gets a random token (as a form's hidden field) and when form is POSTed, the token is checked for validity and expiration.<br>In Flask this is implemented in <a href="http://flask-wtf.readthedocs.io/en/stable/">Flask-WTF plugin</a></p><p>Outline</p><ol><li>GET requests should not change the state of the system</li><li>Check <code>Origin</code> and/or <code>Referer</code> request header in server code to match real server name</li><li>Use CSRF-tokens</li></ol><h2 id="sql-injection">SQL Injection</h2><p>SQL Injection occurs when attacker-controlled input is inserted into a SQL query without proper validation or sanitization. This often occurs when using string formatting or concatenation to build queries.<br>An attacker may be able to read data for which they are not authorized, tamper with or destroy data, or possibly even write files or execute code on the database server. The impact is dependent on the exact scenario, but is generally quite severe.</p><h3 id="exploit-2">Exploit</h3><p>Consider bank transfer form from the above example with the following Flask app (I'm using SQLAlchemy here and trying to put things simple, but usually it's not how you manage database session in Flask app)</p><!--kg-card-begin: code--><pre><code>from flask import Flask, request, render_template, make_response, redirect, url_for
from sqlalchemy import Column, Integer, String
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker
from sqlalchemy import create_engine

app = Flask(__name__)
Base = declarative_base()
engine = create_engine('sqlite:///123.db', echo=True)

@app.route('/', methods=['GET', 'POST'])
def transfer():
    session = sessionmaker(bind=engine)()
    account_balance_query = session.execute('SELECT balance from accounts WHERE number=1111')
    account_balance = int(account_balance_query.fetchone()[0])
    if request.method == 'POST':
        transferred_amount = request.form['amount']
        destination_account = request.form['destination_account']
        session.execute('UPDATE accounts SET balance = balance - ' + transferred_amount + ' WHERE number=1111')
        session.execute('UPDATE accounts SET balance = balance + ' + transferred_amount + ' WHERE number=' + destination_account)
        session.commit()
        session.close()
        return redirect(url_for('transfer'))
    response = make_response(render_template('transfer.html', balance=account_balance))
    session.close()
    return response

</code></pre><!--kg-card-end: code--><p>I've tried to break all the rules here: building raw queries and concatenating query string with user input directly (I might have used <code>.format</code> as well).<br>So when entering <code>2222;DROP DATABASE;</code> in destination account input field I expected this particular line<br><code>session.execute('UPDATE accounts SET balance = balance + ' + transferred_amount + ' WHERE number=' + destination_account)</code><br>execute an update and then drop database.<br>But it gave me that error <code>sqlite3.Warning: You can only execute one statement at a time.</code> and no changes were made to database.<br>Not all drivers have that protection, while <a href="http://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursor-execute.html">some</a> allow multiple statement to be executed like so.</p><h3 id="mitigation-2">Mitigation</h3><p>The proper way to avoid that is to use ORMs. In that case the Flask app will be like this:</p><!--kg-card-begin: code--><pre><code>from flask import Flask, request, render_template, make_response, redirect, url_for
from sqlalchemy import Column, Integer, String
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker
from sqlalchemy import create_engine

app = Flask(__name__)
Base = declarative_base()
engine = create_engine('sqlite:///123.db', echo=True)


class Account(Base):
    __tablename__ = 'accounts'
    id = Column(Integer, primary_key=True, autoincrement=True)
    number = Column(String(64))
    balance = Column(Integer)


@app.route('/', methods=['GET', 'POST'])
def transfer():
    session = sessionmaker(bind=engine)()
    account = session.query(Account).filter_by(number='1111').one()
    if request.method == 'POST':
        transferred_amount = int(request.form['amount'])
        account.balance -= transferred_amount
        destination_account_number = request.form['destination_account']
        destination_account = session.query(Account).filter_by(number=destination_account_number).one()
        destination_account.balance += transferred_amount
        session.commit()
        session.close()
        return redirect(url_for('transfer'))
    session.close()
    response = make_response(render_template('transfer.html', balance=account.balance))
    return response
</code></pre><!--kg-card-end: code--><h2 id="directory-traversal">Directory traversal</h2><p>Directory traversal may happen when for example an attacker uploads a file with a filename like <code>../../../etc/passwd</code>. If he guessed the number of <code>..</code> right he might overwrite the file (given that uwsgi or Flask is running as root, but it may be any other file like <code>~/bash.rc</code>).<br>The mitigation is explained in official Flask docs <a href="http://flask.pocoo.org/docs/1.0/patterns/fileuploads/">here</a></p><p>Essentially you need to sanitize filenames from file upload form. Another advice is avoid using user provided filenames at all and generate your own (hash of the datetime/username/etc) and store them on a separate subdomain (more on it later)</p><h2 id="xss-in-uploaded-files">XSS in uploaded files</h2><p>This is not particularly related to Flask, but malicious javascript might appear not only in reflected output or stored in database (see general XSS attack), but it can also be embedded in images.<br>For example, <a href="https://marcoramilli.blogspot.com/2014/01/hacking-through-image-gif-turn.html">this blog post</a><br>uses that <a href="https://pastebin.com/6yUbfGX5">code</a> to embed javascript in GIF image file. CSP won't help here - so the only way is to serve the images from separate subdomain (that's what actually Facebook does)</p><p>Another thing related to files is how to you actually serve them. A pdf document uploaded by an attacker may have malicious code so if that file is server to another users it's better to add <code>Content-Disposition: attachment</code> header to server response so browser will download it instead of showing right away.</p><h2 id="cookie-protection">Cookie protection</h2><p>Cookie files are used for a lot of things along with storing session or authentication data.<br>There are some methods to protect them from exposing to an attacker</p><h3 id="secure">Secure</h3><p>Cookies are sent with every request in clear text:</p><!--kg-card-begin: code--><pre><code>GET /index.html HTTP/1.1
Host: www.example.org
Cookie: session=XXXXXXX
</code></pre><!--kg-card-end: code--><p>It means that if an attacker that controls network equipment between you and server (or your ISP) can easily read it.<br>Setting cookie <code>secure</code> flag will instruct browser to send a cookie only over protected HTTPS connection.</p><h3 id="http-only">HTTP Only</h3><p><code>HttpOnly</code> flag will instruct browser to hide cookie content from javascript code. In case of XSS attack it will prevent an attacker from accessing sensitive data stored in it.</p><h3 id="samesite">SameSite</h3><p>In the CSRF example the critical part of the attack was that user's cookie was send from attacker controlled site. It can be mitigated by setting <code>SameSite=strict</code>.<br>Another option for that flag is 'lax' which won't allow sending cookies from another sites when doing requests other than <code>GET</code>.</p><p>Flask by default uses <code>session</code> cookie and its flags are set by configuring <code>app</code>:</p><!--kg-card-begin: code--><pre><code>app.config.update(
    SESSION_COOKIE_SECURE=True,
    SESSION_COOKIE_HTTPONLY=True,
    SESSION_COOKIE_SAMESITE='Lax',
)
</code></pre><!--kg-card-end: code--><p>User defined cookies are set with response:</p><!--kg-card-begin: code--><pre><code>response.set_cookie('key', 'value', secure=True, httponly=True, samesite='Lax')
</code></pre><!--kg-card-end: code--><p>Have your Flask apps ever been hacked? Drop me a message on LinkedIn <a href="https://www.linkedin.com/in/smirnovam/">https://www.linkedin.com/in/smirnovam/</a></p>
                </div>
            </section>


            <footer class="post-full-footer">


                    
<section class="author-card">
        <img class="author-profile-image" src="//www.gravatar.com/avatar/f3f61e69a3bdf7419f19cb1be356c0b1?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Alexey Smirnov" />
    <section class="author-card-content">
        <h4 class="author-card-name"><a href="/author/alexey/">Alexey Smirnov</a></h4>
            <p>Read <a href="/author/alexey/">more posts</a> by this author.</p>
    </section>
</section>
<div class="post-full-footer-right">
    <a class="author-card-button" href="/author/alexey/">Read More</a>
</div>


            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card"

                >
                    <header class="read-next-card-header">
                        <small class="read-next-card-header-sitetitle">&mdash; smirnov-am.github.io &mdash;</small>
                        <h3 class="read-next-card-header-title"><a href="/tag/python/">python</a></h3>
                    </header>
                    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                    <div class="read-next-card-content">
                        <ul>
                            <li><a href="/ci-ci-pipeline-for-aws-lambda-python-runtime/">CI/CD  pipeline for AWS Lambda (Python runtime)</a></li>
                            <li><a href="/anomalies-in-bank-transactions/">Anomalies in bank transactions</a></li>
                            <li><a href="/calculating-enterprise-value-with-python-and-pandas-part-1-wacc-and-dcf/">Calculating enterprise value with Python and Pandas (part 2). WACC and DCF</a></li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="/tag/python/">See all 6 posts →</a>
                    </footer>
                </article>

                <article class="post-card post tag-flask ">

    <a class="post-card-image-link" href="/running-flask-in-production-with-docker/">
        <img class="post-card-image"
            srcset="/content/images/size/w300/2019/04/kitflask.jpg 300w,
                    /content/images/size/w600/2019/04/kitflask.jpg 600w,
                    /content/images/size/w1000/2019/04/kitflask.jpg 1000w,
                    /content/images/size/w2000/2019/04/kitflask.jpg 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="/content/images/size/w600/2019/04/kitflask.jpg"
            alt="Running Flask in production with Docker"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/running-flask-in-production-with-docker/">

            <header class="post-card-header">
                    <span class="post-card-tags">Flask</span>
                <h2 class="post-card-title">Running Flask in production with Docker</h2>
            </header>

            <section class="post-card-excerpt">
                <p>Google top for running Flask with Docker is full of posts where Flask runs in debug mode.That what logs look like when Flask is in development mode: * Serving Flask app "app" (lazy</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Alexey Smirnov
                    </div>

                        <a href="/author/alexey/" class="static-avatar">
                            <img class="author-profile-image" src="//www.gravatar.com/avatar/f3f61e69a3bdf7419f19cb1be356c0b1?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Alexey Smirnov" />
                        </a>
                </li>
            </ul>

            <span class="reading-time">6 min read</span>

        </footer>

    </div>

</article>

                <article class="post-card post tag-aws tag-nlp tag-serverless ">

    <a class="post-card-image-link" href="/using-nltk-library-with-aws-lambda/">
        <img class="post-card-image"
            srcset="/content/images/size/w300/2019/04/la.png 300w,
                    /content/images/size/w600/2019/04/la.png 600w,
                    /content/images/size/w1000/2019/04/la.png 1000w,
                    /content/images/size/w2000/2019/04/la.png 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="/content/images/size/w600/2019/04/la.png"
            alt="Using NLTK library with AWS Lambda."
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/using-nltk-library-with-aws-lambda/">

            <header class="post-card-header">
                    <span class="post-card-tags">AWS</span>
                <h2 class="post-card-title">Using NLTK library with AWS Lambda.</h2>
            </header>

            <section class="post-card-excerpt">
                <p>I'm going to walk through the process of creating a simple serverless app for finding part-of-speech tag of an input text.1 Create virtual environmentmac:serverless_nltk as$ mkvirtualenv nltk_env 2 Install</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Alexey Smirnov
                    </div>

                        <a href="/author/alexey/" class="static-avatar">
                            <img class="author-profile-image" src="//www.gravatar.com/avatar/f3f61e69a3bdf7419f19cb1be356c0b1?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Alexey Smirnov" />
                        </a>
                </li>
            </ul>

            <span class="reading-time">3 min read</span>

        </footer>

    </div>

</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://smirnov-am.github.io">
            <span>smirnov-am.github.io</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Securing Flask web applications</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-fb" href="https://www.linkedin.com/shareArticle?url=https://smirnov-am.github.io/securing-flask-web-applications/&title=Securing%20Flask%20web%20applications" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
width="26" height="26"
viewBox="0 0 192 192"
style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,192v-192h192v192z" fill="none"></path><g fill="#ffffff"><g id="surface1"><path d="M156,0h-120c-19.875,0 -36,16.125 -36,36v120c0,19.875 16.125,36 36,36h120c19.875,0 36,-16.125 36,-36v-120c0,-19.875 -16.125,-36 -36,-36zM59.36539,162.98077h-29.82693l-0.17307,-89.30769h29.82692zM43.70192,61.99038h-0.17308c-9.75,0 -16.03846,-6.72115 -16.03846,-15.08653c0,-8.56731 6.49039,-15.0577 16.41347,-15.0577c9.92308,0 16.00961,6.49038 16.21153,15.0577c0,8.36538 -6.31731,15.08653 -16.41346,15.08653zM162.77885,162.98077h-30.08654v-48.51923c0,-11.74039 -3.11538,-19.73077 -13.61538,-19.73077c-8.01923,0 -12.34615,5.39423 -14.42308,10.61538c-0.77885,1.875 -0.98077,4.44231 -0.98077,7.06731v50.56731h-30.23077l-0.17308,-89.30769h30.23077l0.17308,12.60577c3.86538,-5.97116 10.29808,-14.42308 25.70192,-14.42308c19.09616,0 33.37501,12.46154 33.37501,39.25961v51.86539z"></path></g></g></g></svg>
</a>
        <a class="floating-header-share-tw" href="http://www.reddit.com/submit?url=https://smirnov-am.github.io/securing-flask-web-applications/&title=Securing%20Flask%20web%20applications" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14.238 15.348c.085.084.085.221 0 .306-.465.462-1.194.687-2.231.687l-.008-.002-.008.002c-1.036 0-1.766-.225-2.231-.688-.085-.084-.085-.221 0-.305.084-.084.222-.084.307 0 .379.377 1.008.561 1.924.561l.008.002.008-.002c.915 0 1.544-.184 1.924-.561.085-.084.223-.084.307 0zm-3.44-2.418c0-.507-.414-.919-.922-.919-.509 0-.923.412-.923.919 0 .506.414.918.923.918.508.001.922-.411.922-.918zm13.202-.93c0 6.627-5.373 12-12 12s-12-5.373-12-12 5.373-12 12-12 12 5.373 12 12zm-5-.129c0-.851-.695-1.543-1.55-1.543-.417 0-.795.167-1.074.435-1.056-.695-2.485-1.137-4.066-1.194l.865-2.724 2.343.549-.003.034c0 .696.569 1.262 1.268 1.262.699 0 1.267-.566 1.267-1.262s-.568-1.262-1.267-1.262c-.537 0-.994.335-1.179.804l-2.525-.592c-.11-.027-.223.037-.257.145l-.965 3.038c-1.656.02-3.155.466-4.258 1.181-.277-.255-.644-.415-1.05-.415-.854.001-1.549.693-1.549 1.544 0 .566.311 1.056.768 1.325-.03.164-.05.331-.05.5 0 2.281 2.805 4.137 6.253 4.137s6.253-1.856 6.253-4.137c0-.16-.017-.317-.044-.472.486-.261.82-.766.82-1.353zm-4.872.141c-.509 0-.922.412-.922.919 0 .506.414.918.922.918s.922-.412.922-.918c0-.507-.413-.919-.922-.919z"/></svg></a>
        <a class="floating-header-share-fb" href="https://news.ycombinator.com/submitlink?u=https://smirnov-am.github.io/securing-flask-web-applications/&t=Securing%20Flask%20web%20applications" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
width="100" height="100"
viewBox="0 0 50 50"
style=" fill:#000000;">    <path d="M 4 4 L 4 5 L 4 46 L 46 46 L 46 4 L 4 4 z M 6 6 L 44 6 L 44 44 L 6 44 L 6 6 z M 12.652344 13 L 14.238281 15.947266 L 21 28.503906 L 21 36 L 21 38 L 23 38 L 27 38 L 29 38 L 29 36 L 29 28.503906 L 35.761719 15.947266 L 37.347656 13 L 34 13 L 30.824219 13 L 29.664062 13 L 29.087891 14.007812 L 25 21.158203 L 20.912109 14.007812 L 20.337891 13 L 19.177734 13 L 16 13 L 12.652344 13 z M 16 15 L 19.175781 15 L 25 25.1875 L 30.824219 15 L 34 15 L 27 28 L 27 36 L 23 36 L 23 28 L 16 15 z"></path></svg></a>
    </div>
    <progress id="reading-progress" class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://smirnov-am.github.io">smirnov-am.github.io</a> &copy; 2019</section>
                <nav class="site-footer-nav">
                    <a href="https://smirnov-am.github.io">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>


    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/built/jquery.fitvids.js?v=e6220510ab"></script>


    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('#reading-progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();

});
</script>


    

</body>
</html>
