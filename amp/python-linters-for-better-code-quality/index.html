<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/smirnov-am.github.io"
        },
        "articleSection" : "post",
        "name" : "Python linters for better code quality",
        "headline" : "Python linters for better code quality",
        "description" : "Code quality There are two types of software quality - external and internal. External are the ones that are important to the users of the system. They may include:\n correctness - software behaves as users expect usability - how easy is it to use reliability - the ability to function under any circumstances  Internal quality characteristics are what developers care about:\n maintainability - how easy the software can be modified readability - how easy new developers can understand what code is doing by reading it testability - how easy the systems could be tested to verify that it satisfies the requirements  The internal characteristics relate closely with the quality of the code and design.",
        "inLanguage" : "en-US",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2019",
        "datePublished": "2019-11-04 20:23:49 \x2b0000 UTC",
        "dateModified" : "2019-11-04 20:23:49 \x2b0000 UTC",
        "url" : "https:\/\/smirnov-am.github.io\/amp\/python-linters-for-better-code-quality\/",
        "wordCount" : "1232",
        "keywords" : [ "Python","Blog" ]
    }
    </script>

<title>Python linters for better code quality | Alexey Smirnov</title>

<meta property='og:title' content='Python linters for better code quality - Alexey Smirnov'>
<meta property='og:description' content='Code quality There are two types of software quality - external and internal. External are the ones that are important to the users of the system. They may include:
 correctness - software behaves as users expect usability - how easy is it to use reliability - the ability to function under any circumstances  Internal quality characteristics are what developers care about:
 maintainability - how easy the software can be modified readability - how easy new developers can understand what code is doing by reading it testability - how easy the systems could be tested to verify that it satisfies the requirements  The internal characteristics relate closely with the quality of the code and design.'>
<meta property='og:url' content='https://smirnov-am.github.io/amp/python-linters-for-better-code-quality/'>
<meta property='og:site_name' content='Alexey Smirnov'>
<meta property='og:type' content='article'><meta property='og:image' content='https://smirnov-am.github.io/images/2019/11/asphalt-blur-cold-302686.jpg'><meta property='article:published_time' content='2019-11-04T20:23:49Z'/><meta property='article:modified_time' content='2019-11-04T20:23:49Z'/><meta name='twitter:card' content='summary_large_image'><meta name='twitter:site' content='@'><meta name='twitter:creator' content='@'>


<link href="https://smirnov-am.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Alexey Smirnov" />

<link rel="stylesheet" href="https://smirnov-am.github.io/css/style.css"/><link rel="apple-touch-icon" sizes="180x180" href="https://smirnov-am.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://smirnov-am.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://smirnov-am.github.io/favicon-16x16.png">
<link rel="manifest" href="https://smirnov-am.github.io/site.webmanifest">
<link rel="mask-icon" href="https://smirnov-am.github.io/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="https://smirnov-am.github.io/amp/python-linters-for-better-code-quality/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<meta name="google-site-verification" content="LxHvTgaBdcBpIRtJMFKFiIvx5Mm45WC1z1S57O6O5O8" />
</head>
<body>
<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="https://smirnov-am.github.io">
          <h1 id="nav-heading" class="title is-4">Alexey Smirnov</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="github" href='https://github.com/smirnov-am'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/smirnovam'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="rss" href='https://smirnov-am.github.io/index.xml'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
  <script src="https://smirnov-am.github.io/js/navicon-shift.js"></script>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="https://smirnov-am.github.io/tags/python">#Python</a>



      
    </div>
    <h2 class="subtitle is-6">November 4, 2019</h2>
    <h1 class="title">Python linters for better code quality</h1>
    
    <div class="content">
      

<h2 id="code-quality">Code quality</h2>

<p>There are two types of software quality - external and internal. External are the ones that are important to the users of the system. They may include:</p>

<ul>
<li>correctness - software behaves as users expect</li>
<li>usability - how easy is it to use</li>
<li>reliability - the ability to function under any circumstances</li>
</ul>

<p>Internal quality characteristics are what developers care about:</p>

<ul>
<li>maintainability - how easy the software can be modified</li>
<li>readability - how easy new developers can understand what code is doing by reading it</li>
<li>testability - how easy the systems could be tested to verify that it satisfies the requirements</li>
</ul>

<p>The internal characteristics relate closely with the quality of the code and design.</p>

<h2 id="does-code-quality-matter">Does code quality matter?</h2>

<p>One of my recent pet-projects is <a href="https://afplakkenonline.nl/" target="_blank">https://afplakkenonline.nl/</a>. I was solving my problem with a script to scan bank transaction history to find recurrent payments but then decided to put it into AWS Lambda and create a UI. Since I launched it I got 0 hits. I posted about it on LinkedIn and told my colleagues about it. But of course, launching a service without proper customer development is a key to failure. I have no plans to work on this project and market it. When I was writing it I was not sure if someone else will see the code and whether I get some donations from the users, so I didn&rsquo;t care about code quality at all. Not that the code is a mess - it&rsquo;s ok. But I&rsquo;ve spent an hour putting it all together, so it&rsquo;s maybe not my best one.</p>

<p>I work full time as a software developer. I write software that generates revenue for the company I work for. The owner may not care about code quality as long as users don&rsquo;t complain (external software quality characteristics are met) and pay. But from CTO point of view code quality matters:</p>

<ul>
<li>our team productivity fill drop as we won&rsquo;t be effective when working with smelly code if we don&rsquo;t keep the plank high enough from the beginning</li>
<li>onboarding for the new members of the team will take longer</li>
<li>engineers will become dissatisfied with the job</li>
<li>we won&rsquo;t be able to implement new revenue-generating features on time</li>
</ul>

<p>So there are situations when code quality doesn&rsquo;t matter, and whereit may cost a lot</p>

<h2 id="python-linters">Python linters</h2>

<p>There are many methods to ensure quality: having a code style, doing code reviews, etc. And one of them is using automated tools such as linters. They analyze the code for known issues - for example, violations of PEP8 code style. They can be incorporated into CI/CD pipelines and stop deployments if linters report problems (or the number of issues increased from the last run).</p>

<p>They can also be used as pre-commit hooks, so every time a code is committed on the developer&rsquo;s machine a script is run to perform the checks.</p>

<p>I also created a GitHub app that runs one of the most popular python linters - flake8 - on pull requests. Check it out here <a href="https://github.com/apps/tongschar" target="_blank">https://github.com/apps/tongschar</a></p>

<p>I think that it will also remove the human factor when doing code reviews - some engineers think of their code as their baby, and I don&rsquo;t want to bring down a colleague I will work with for years to come by noting all the issues in his/her PRs. It&rsquo;s better to let the bot do the job.</p>

<p>So there are several python linters available:</p>

<h3 id="flake8">Flake8</h3>

<p>It&rsquo;s a wrapper around code style checker, error checker and complexity checker</p>

<ul>
<li>pycodestyle - style checker for PEP8 compliance. PEP8 is a set of rules for how to format your Python code to maximize its readability. It acts as a base for a company/project/team-specific code style. Error codes are E<strong><em>/W</em></strong>/N8**</li>
<li>pyflakes - checks for errors or violation of common non-stylistic practices. For example, things like &ldquo;module imported but unused&rdquo;. See full list <a href="http://flake8.pycqa.org/en/2.5.5/warnings.html" target="_blank">here</a></li>
<li>McCabe complexity checker. Complexity is a quantitative measure of the number of linearly independent paths through a program&rsquo;s source code. It was developed by Thomas J. McCabe, Sr. in 1976. So basically nested if statements inside for loops will blow up this number when the threshold for a good code is less than 10</li>
</ul>

<p>Flake8 has a lot of configuration options, but its killer feature is an ecosystem of plugins. Take for example <a href="https://pypi.org/project/flake8-django/" target="_blank">https://pypi.org/project/flake8-django/</a>. It looks for bad practices when using Django web framework.</p>

<h3 id="other-wrappers">Other wrappers</h3>

<p><a href="https://github.com/coala/coala" target="_blank"><strong>Coala</strong></a> - wraps all popular Python linters: bandit, isort, mypy, pycodestyle, pydocstyle, pyflakes, pylint, pyroma, radon, vulture, yapf. Has 2.9k stars on github and is actively maintained. Also, it supports Jupyter notebooks.</p>

<p><a href="https://github.com/klen/pylama" target="_blank"><strong>Pylama</strong></a> - wraps mccabe, pycodestyle, pydocstyle, pyflakes, pylint, radon. Has 626 stars with last commit more than a year ago (as of November 2019).</p>

<p><a href="https://github.com/PyCQA/prospector" target="_blank"><strong>prospector</strong></a> - wraps dodgy, frosted, mccabe, pycodestyle, pydocstyle, pyflakes, pylint, pyroma, vulture. Same authors as flake8 with 1.2k stars.</p>

<p><a href="https://github.com/wemake-services/wemake-python-styleguide" target="_blank"><strong>wemake-python-styleguide</strong></a> is a flake8 with some other plugins as dependencies. 535 stars.</p>

<p><a href="https://github.com/ContinuumIO/ciocheck" target="_blank"><strong>Ciocheck</strong></a> wraps autopep8, flake8, isort, pep8, pydocstyle, pylint, pytest-cov, yapf.Some of them - like autopep8 - are formatters. They will automatically format code to remove found issues.</p>

<h3 id="pylint">pylint</h3>

<p>From the authors of flake8 pylint, checks for PEP8-like code style, some code smells and type errors. It intersects with flake8 in many regards, but doesn&rsquo;t check for complexity (can be enabled through the plugin pylint.extensions.mccabe).</p>

<p>Some report that pylint is more thorough than flake8 and whinier. It will take more time to reach the state &ldquo;no linter issues&rdquo; from &ldquo;not using linter at all&rdquo; state with pylint than with flake8.</p>

<h3 id="security-linters">Security linters</h3>

<p><a href="https://github.com/pyupio/safety" target="_blank"><strong>safety</strong></a> - check dependencies for known vulnerabilities. The vulnerability database is owned by pyupio. The company also provides CI service that integrates with GitHub for as low as $29 p.m. for private repos (free for open source).</p>

<p><a href="https://github.com/PyCQA/bandit" target="_blank"><strong>bandit</strong></a> - builds a tree of python objects and run it against know unsafe coding practices - things like <code>exec</code> or <code>assert</code> used, using <code>pickle</code> or <code>debug=True</code> for <code>flask</code> app.</p>

<p><a href="https://github.com/landscapeio/dodgy" target="_blank"><strong>dodgy</strong></a> - looks for dodgy code. It intersects a bit with bandit. It can check for hardcoded passwords and such.</p>

<h3 id="black">black</h3>

<p><a href="https://github.com/psf/black" target="_blank"><strong>black</strong></a> - the popularity of this tool exploded recently. Black doesn&rsquo;t just report on issues - it formats the code the way it likes it. Very nice tools with no configuration - it just works and everybody is ok with that.</p>

<h2 id="experiment">Experiment</h2>

<p>I&rsquo;ll try to use some of the above-mentioned linters with default settingson <code>requests</code> source code.</p>

<p><strong>Pylint</strong> gave a lot of warnings and errors</p>

<pre><code>~ pylint -f parseable requests/requests | grep -c &quot;^requests&quot;
No config file found, using default configuration
368

</code></pre>

<p>It also gave the library 7.<sup>70</sup>&frasl;<sub>10</sub> score.</p>

<p>Default <strong>flake8</strong>:</p>

<pre><code>~ flake8 requests/requests | grep -c &quot;^requests&quot;
247

</code></pre>

<p>While most of the are line too long (&gt;79 chars). Otherwise, it&rsquo;s:</p>

<pre><code>~ flake8 --ignore E501 requests/requests | grep -c &quot;^requests&quot;
111

</code></pre>

<p><strong>Bandit</strong> found 11 issues - insecure hash functions and using asserts</p>

<pre><code>~ bandit -r requests/requests | grep -c &quot;^&gt;&gt;&quot;
[main]  INFO    profile include tests: None
[main]  INFO    profile exclude tests: None
[main]  INFO    cli include tests: None
[main]  INFO    cli exclude tests: None
[main]  INFO    running on Python 3.6.8
11

</code></pre>

<h2 id="do-linters-increase-code-quality">Do linters increase code quality?</h2>

<p>I think the linters cover such internal quality characteristics as:</p>

<ul>
<li>readability through checking code style</li>
<li>maintainability through finding known bad practices and anti-patterns</li>
</ul>

<p>Security linters also scratch the surface of external characteristics - reliability by increasing security.</p>

<p>Do you use linters? Drop me a message in <a href="https://www.linkedin.com/in/smirnovam/" target="_blank">LinkedIn</a> and try my <a href="https://github.com/apps/tongschar" target="_blank">GitHub app</a>.</p>

      
      <div class="related">

<h3>Similar articles:</h3>
<ul>
	
	<li><a href="https://smirnov-am.github.io/amp/representing-money-in-python/">Representing money in Python</a></li>
	
	<li><a href="https://smirnov-am.github.io/amp/ci-ci-pipeline-for-aws-lambda-python-runtime/">CI/CD  pipeline for AWS Lambda (Python runtime)</a></li>
	
	<li><a href="https://smirnov-am.github.io/amp/anomalies-in-bank-transactions/">Anomalies in bank transactions</a></li>
	
	<li><a href="https://smirnov-am.github.io/amp/calculating-enterprise-value-with-python-and-pandas-part-1-wacc-and-dcf/">Calculating enterprise value with Python and Pandas (part 2). WACC and DCF</a></li>
	
	<li><a href="https://smirnov-am.github.io/amp/unittesting-decorators/">Unittesting decorators</a></li>
	
</ul>
</div>
      
    </div>
    
  </div>
</section>

    <script src="https://smirnov-am.github.io/js/copycode.js"></script>



<section class="section">
  <div class="container has-text-centered">
    <p>&copy; Alexey Smirnov 2020</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-107429956-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>
</html>

