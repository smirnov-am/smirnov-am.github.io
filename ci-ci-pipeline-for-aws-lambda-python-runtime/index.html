<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>CI/CD  pipeline for AWS Lambda (Python runtime)</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css?v=228a7463dd" />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="canonical" href="https://smirnov-am.github.io/ci-ci-pipeline-for-aws-lambda-python-runtime/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://smirnov-am.github.io/ci-ci-pipeline-for-aws-lambda-python-runtime/amp/" />
    
    <meta property="og:site_name" content="smirnov-am.github.io" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="CI/CD  pipeline for AWS Lambda (Python runtime)" />
    <meta property="og:description" content="Continuous integration and continuous delivery are powerful practices that allow
release software faster and of a higher quality. I&#x27;m going to walk through steps
to implement CI/CD pipeline for a small lambda function that calculates square
roots by:

 * getting message from SQS that contains the number to calculate sqrt for
 * checks if the calculation was done before by querying DynamoDB
 * if there is not cached answer in DynamoDB - calculate sqrt and saves the
   result
 * print the result s" />
    <meta property="og:url" content="https://smirnov-am.github.io/ci-ci-pipeline-for-aws-lambda-python-runtime/" />
    <meta property="og:image" content="https://smirnov-am.github.io/content/images/2019/08/quinten-de-graaf-L4gN0aeaPY4-unsplash.jpg" />
    <meta property="article:published_time" content="2019-08-18T14:05:36.000Z" />
    <meta property="article:modified_time" content="2019-08-18T14:05:36.000Z" />
    <meta property="article:tag" content="AWS" />
    <meta property="article:tag" content="python" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="CI/CD  pipeline for AWS Lambda (Python runtime)" />
    <meta name="twitter:description" content="Continuous integration and continuous delivery are powerful practices that allow
release software faster and of a higher quality. I&#x27;m going to walk through steps
to implement CI/CD pipeline for a small lambda function that calculates square
roots by:

 * getting message from SQS that contains the number to calculate sqrt for
 * checks if the calculation was done before by querying DynamoDB
 * if there is not cached answer in DynamoDB - calculate sqrt and saves the
   result
 * print the result s" />
    <meta name="twitter:url" content="https://smirnov-am.github.io/ci-ci-pipeline-for-aws-lambda-python-runtime/" />
    <meta name="twitter:image" content="https://smirnov-am.github.io/content/images/2019/08/quinten-de-graaf-L4gN0aeaPY4-unsplash.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Alexey Smirnov" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="AWS, python" />
    <meta property="og:image:width" content="2000" />
    <meta property="og:image:height" content="1333" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "smirnov-am.github.io",
        "logo": {
            "@type": "ImageObject",
            "url": "https://smirnov-am.github.io/favicon.ico",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Alexey Smirnov",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/f3f61e69a3bdf7419f19cb1be356c0b1?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "https://smirnov-am.github.io/author/alexey/",
        "sameAs": []
    },
    "headline": "CI/CD  pipeline for AWS Lambda (Python runtime)",
    "url": "https://smirnov-am.github.io/ci-ci-pipeline-for-aws-lambda-python-runtime/",
    "datePublished": "2019-08-18T14:05:36.000Z",
    "dateModified": "2019-08-18T14:05:36.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://smirnov-am.github.io/content/images/2019/08/quinten-de-graaf-L4gN0aeaPY4-unsplash.jpg",
        "width": 2000,
        "height": 1333
    },
    "keywords": "AWS, python",
    "description": "Continuous integration and continuous delivery are powerful practices that allow\nrelease software faster and of a higher quality. I&#x27;m going to walk through steps\nto implement CI/CD pipeline for a small lambda function that calculates square\nroots by:\n\n * getting message from SQS that contains the number to calculate sqrt for\n * checks if the calculation was done before by querying DynamoDB\n * if there is not cached answer in DynamoDB - calculate sqrt and saves the\n   result\n * print the result s",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://smirnov-am.github.io/"
    }
}
    </script>

    <meta name="generator" content="Ghost 2.21" />
    <link rel="alternate" type="application/rss+xml" title="smirnov-am.github.io" href="https://smirnov-am.github.io/rss/" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107429956-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107429956-1');
</script>

</head>
<body class="post-template tag-aws tag-python">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="https://smirnov-am.github.io">smirnov-am.github.io</a>
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="https://smirnov-am.github.io/">Home</a></li>
    <li class="nav-github" role="menuitem"><a href="https://github.com/smirnov-am">GitHub</a></li>
    <li class="nav-linkedin" role="menuitem"><a href="https://www.linkedin.com/in/smirnovam/">LinkedIn</a></li>
    <li class="nav-bookshelf" role="menuitem"><a href="https://www.goodreads.com/review/list/100768091-alex-smirnov">Bookshelf</a></li>
</ul>

    </div>
    <div class="site-nav-right">
        <div class="social-links">
        </div>
            <a class="rss-button" href="https://feedly.com/i/subscription/feed/https://smirnov-am.github.io/rss/" title="RSS" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"/><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-aws tag-python ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2019-08-18">18 August 2019</time>
                        <span class="date-divider">/</span> <a href="/tag/aws/">AWS</a>
                </section>
                <h1 class="post-full-title">CI/CD  pipeline for AWS Lambda (Python runtime)</h1>
            </header>

            <figure class="post-full-image">
                <img
                    srcset="/content/images/size/w300/2019/08/quinten-de-graaf-L4gN0aeaPY4-unsplash.jpg 300w,
                            /content/images/size/w600/2019/08/quinten-de-graaf-L4gN0aeaPY4-unsplash.jpg 600w,
                            /content/images/size/w1000/2019/08/quinten-de-graaf-L4gN0aeaPY4-unsplash.jpg 1000w,
                            /content/images/size/w2000/2019/08/quinten-de-graaf-L4gN0aeaPY4-unsplash.jpg 2000w"
                    sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px"
                    src="/content/images/size/w2000/2019/08/quinten-de-graaf-L4gN0aeaPY4-unsplash.jpg"
                    alt="CI/CD  pipeline for AWS Lambda (Python runtime)"
                />
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p>Continuous integration and continuous delivery are powerful practices that allow release software faster and of a higher quality. I'm going to walk through steps to implement CI/CD pipeline for a small lambda function that calculates square roots by:</p><ul><li>getting message from SQS that contains the number to calculate sqrt for</li><li>checks if the calculation was done before by querying DynamoDB</li><li>if there is not cached answer in DynamoDB - calculate sqrt and saves the result</li><li>print the result so it's visible in CloudWatch logs</li></ul><p>Things I'd like the pipeline to do:</p><ul><li>create all the resources - SQS and Dynamo</li><li>subscribe to any changes that are committed to master branch of GitHub repo</li><li>run tests- I'm going to run unit tests, but since the resources are there you can run integration/end-to-end tests</li><li>build the package for lambda with all python dependencies</li><li>deploy the package</li></ul><p>Pipeline architecture:<br></p><!--kg-card-begin: image--><figure class="kg-card kg-image-card"><img src="https://smirnov-am.github.io/content/images/2019/08/cicd_lambda.png" class="kg-image"></figure><!--kg-card-end: image--><p>The initial CloudFormation template along with all the code can be found in <a href="https://github.com/smirnov-am/cicd_lambda">this GitHub repo</a></p><p>I'm going to walk through the details of this pipeline.</p><p>The <code>pipeline.yaml</code> (see <code>aws</code> folder in the repo) contain the CloudFormation template that will create SQS, Dynamo, CodePipeline with all its steps:</p><ul><li>source step to get the source code form GitHub</li><li>CodeTest (CodeBuild type) to run a container inside which I'm running tests</li><li>CodeBuild - a container that will prepare the build - zip file on S3 Lambda can digest</li><li>CodeDeploy - the step to deploy newly build Lambda.</li></ul><p>The first thing to do is to create GitHub OAuth token - just follow steps 1-6 from <a href="https://docs.aws.amazon.com/en_us/codepipeline/latest/userguide/GitHub-create-personal-token-CLI.html">this AWS doc</a>.</p><p>Next, you need to create a stack from AWS console - Go to CloudFormation and click Create Stack. It will ask to fill in the stack parameters:</p><ul><li>name - a reference to the resources of the stack</li><li>GitHub token, repo owner and repo name</li></ul><p>After it's created you can go to CodePipeline to see the newly created pipeline. If you open it there will be Source, CodeTest, CodeBuild and CodeDeploy stages present.</p><p>Also, all additional resources will be created:</p><ul><li>SQS queue that will feed the Lambda</li><li>DynamoDB table with Pay-Per-Request billing</li><li>S3 bucket for pipeline artifacts - it's the mechanism to pass result of CodePipeline stages between each other</li><li>S3 bucket that will hold zip file with packaged Lambda code</li></ul><p>Source step of the pipeline is pretty autonomous. AWS will monitor the changes and start the execution of the pipeline once there was a push to the master branch. There is a limit on how many repositories it can monitor so the alternative is to implement a GitHub webhook that will trigger a special Lambda that in turn will start pipeline execution.</p><p>CodeTest is a step of CodeBuild type. Here I'd like to run available tests for the code. Usually, the unit tests are run by developers individually by implementing pre-commit hooks on the local machine. But this step ensures that they were executed before push. Also, it can run the test for a higher level of the testing pyramid.</p><p>CodeBuild uses <a href="https://chalice.readthedocs.io/en/latest/">chalice</a> package to do a couple of things</p><ul><li>create CloudFormation template to deploy lambda</li><li>package Lambda code</li><li>create Lambda policies</li></ul><p>The important part of this stage is the image the container will use. Since some python packages are wrappers around C libraries, which are compiled when we run <code>pip install</code>, so the OS where we run <code>pip install</code> should be similar to the OS which will run the code and use these packages. I found this images <code>amazonlinux:latest</code> on DockerHub, which resembles Lambda runtime. In the container I'm creating a virtual environment and install every dependency in it. Then I just copy site-packages to <code>vendor</code> folder.</p><!--kg-card-begin: markdown--><pre><code>- python3 -m venv v-env &amp;&amp; . v-env/bin/activate &amp;&amp; pip install --upgrade pip &amp;&amp; pip install -r requirements/requirements.txt &amp;&amp; deactivate
- mkdir vendor
- cp -R v-env/lib/python3.7/site-packages/. vendor
- cp -R v-env/lib64/python3.7/site-packages/. vendor
</code></pre>
<!--kg-card-end: markdown--><p>Next thing is our code - it should be placed in a <code>vendor</code> folder as well as per chalice docs. I don't like to have it in my projects structures so I'm creating it in <code>codebuild.yaml</code> (which is referred in CodeTest as a <code>buildspec</code> - a script to run) and copying everything in it.</p><!--kg-card-begin: markdown--><pre><code>- cp -R my_package vendor
</code></pre>
<!--kg-card-end: markdown--><p>There is another difficulty - a Lambda IAM policy. Ideally, it should be as restrictive as possible, but grant access to the SQS and Dynamo we already created. In this stage I'm passing a number of different environment variables to the container:</p><ul><li>the ones that start with <code>LAMBDA_ENV</code> will be put into Lambda config to be available at its runtime</li><li>the ones starting with <code>POLICY_ENV</code> will be used to generate policy document (chalice policy generator is not yet good enough for that)</li></ul><p>There is a <code>config_generator.py</code> script that will read these variables and put them in proper places. <code>LAMBDA_ENV</code> will be put into a file  <code>.chalice/config.json</code> and <code>POLICY_ENV</code>  will go to <code>.chalice/police.json</code> - both will be used later by chalice to generate CloudFormation</p><p>Finally, the size of the build should be less than 265Mb. So I'm deleting extra files (<code>boto3</code> is needed for build, but it's available in Lambda runtime so no need to take it with us).</p><!--kg-card-begin: markdown--><pre><code>- echo 'Size of build' $(du -sm --exclude=./v-env .) 'MB'
- find . -name &quot;*.pyc&quot; -exec rm -f {} \;
- find ./vendor  -name 'boto3' -prune -type d -exec rm -rf {} \;
- find ./vendor  -name 'botocore' -prune -type d -exec rm -rf {} \;
- echo 'Size of build after cleaning' $(du -sm --exclude=./v-env .) 'MB'
</code></pre>
<!--kg-card-end: markdown--><p>The <code>chalice package</code> command, in the end, will create a zip file along with <code>sam.json</code> file. AWS CLI command will prepare the final template for CloudFormation - <code>transformed.yaml</code> - that will drive the deploy stage</p><!--kg-card-begin: markdown--><pre><code>- . v-env/bin/activate &amp;&amp; python config_generator.py &amp;&amp; chalice package /tmp/packaged &amp;&amp; deactivate
- aws cloudformation package --template-file /tmp/packaged/sam.json --s3-bucket ${APP_S3_BUCKET} --output-template-file transformed.yaml
</code></pre>
<!--kg-card-end: markdown--><p>After all that all the changes to the master branch of your repo should be automatically tested, (ideally) integrated and deployed. </p><p>If you use Python in a serverless environment on AWS or use CI/CD for such applications, connect with me on <a href="https://www.linkedin.com/in/smirnovam/">LinkedIn</a></p><p>Code for this post is available <a href="https://github.com/smirnov-am/cicd_lambda">here</a></p>
                </div>
            </section>


            <footer class="post-full-footer">


                    
<section class="author-card">
        <img class="author-profile-image" src="//www.gravatar.com/avatar/f3f61e69a3bdf7419f19cb1be356c0b1?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Alexey Smirnov" />
    <section class="author-card-content">
        <h4 class="author-card-name"><a href="/author/alexey/">Alexey Smirnov</a></h4>
            <p>Read <a href="/author/alexey/">more posts</a> by this author.</p>
    </section>
</section>
<div class="post-full-footer-right">
    <a class="author-card-button" href="/author/alexey/">Read More</a>
</div>


            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card"

                >
                    <header class="read-next-card-header">
                        <small class="read-next-card-header-sitetitle">&mdash; smirnov-am.github.io &mdash;</small>
                        <h3 class="read-next-card-header-title"><a href="/tag/aws/">AWS</a></h3>
                    </header>
                    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                    <div class="read-next-card-content">
                        <ul>
                            <li><a href="/using-nltk-library-with-aws-lambda/">Using NLTK library with AWS Lambda.</a></li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="/tag/aws/">1 post →</a>
                    </footer>
                </article>

                <article class="post-card post tag-python ">

    <a class="post-card-image-link" href="/representing-money-in-python/">
        <img class="post-card-image"
            srcset="/content/images/size/w300/2019/09/alvaro-reyes-MEldcHumbu8-unsplash.jpg 300w,
                    /content/images/size/w600/2019/09/alvaro-reyes-MEldcHumbu8-unsplash.jpg 600w,
                    /content/images/size/w1000/2019/09/alvaro-reyes-MEldcHumbu8-unsplash.jpg 1000w,
                    /content/images/size/w2000/2019/09/alvaro-reyes-MEldcHumbu8-unsplash.jpg 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="/content/images/size/w600/2019/09/alvaro-reyes-MEldcHumbu8-unsplash.jpg"
            alt="Representing money in Python"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/representing-money-in-python/">

            <header class="post-card-header">
                    <span class="post-card-tags">python</span>
                <h2 class="post-card-title">Representing money in Python</h2>
            </header>

            <section class="post-card-excerpt">
                <p>Python's float type is a natural first step to represent monetary amounts in the code. Almost all platforms map Python floats to IEEE-754 “double precision”.Doubles contain 53 bits of precision. When the</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Alexey Smirnov
                    </div>

                        <a href="/author/alexey/" class="static-avatar">
                            <img class="author-profile-image" src="//www.gravatar.com/avatar/f3f61e69a3bdf7419f19cb1be356c0b1?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Alexey Smirnov" />
                        </a>
                </li>
            </ul>

            <span class="reading-time">2 min read</span>

        </footer>

    </div>

</article>

                <article class="post-card post tag-machine-learning tag-python tag-security ">

    <a class="post-card-image-link" href="/anomalies-in-bank-transactions/">
        <img class="post-card-image"
            srcset="/content/images/size/w300/2019/08/hand-keyboard-secured-34203.jpg 300w,
                    /content/images/size/w600/2019/08/hand-keyboard-secured-34203.jpg 600w,
                    /content/images/size/w1000/2019/08/hand-keyboard-secured-34203.jpg 1000w,
                    /content/images/size/w2000/2019/08/hand-keyboard-secured-34203.jpg 2000w"
            sizes="(max-width: 1000px) 400px, 700px"
            src="/content/images/size/w600/2019/08/hand-keyboard-secured-34203.jpg"
            alt="Anomalies in bank transactions"
        />
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="/anomalies-in-bank-transactions/">

            <header class="post-card-header">
                    <span class="post-card-tags">machine learning</span>
                <h2 class="post-card-title">Anomalies in bank transactions</h2>
            </header>

            <section class="post-card-excerpt">
                <p>Recently I've noticed suspicious transactions in my history that were initiated by some shady company that provides as the put it "opportunity to shop with discount" for their subscribers. Some web-shop had small</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Alexey Smirnov
                    </div>

                        <a href="/author/alexey/" class="static-avatar">
                            <img class="author-profile-image" src="//www.gravatar.com/avatar/f3f61e69a3bdf7419f19cb1be356c0b1?s&#x3D;250&amp;d&#x3D;mm&amp;r&#x3D;x" alt="Alexey Smirnov" />
                        </a>
                </li>
            </ul>

            <span class="reading-time">8 min read</span>

        </footer>

    </div>

</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://smirnov-am.github.io">
            <span>smirnov-am.github.io</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">CI/CD  pipeline for AWS Lambda (Python runtime)</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-fb" href="https://www.linkedin.com/shareArticle?url=https://smirnov-am.github.io/ci-ci-pipeline-for-aws-lambda-python-runtime/&title=CI%2FCD%20%20pipeline%20for%20AWS%20Lambda%20(Python%20runtime)" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
width="26" height="26"
viewBox="0 0 192 192"
style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,192v-192h192v192z" fill="none"></path><g fill="#ffffff"><g id="surface1"><path d="M156,0h-120c-19.875,0 -36,16.125 -36,36v120c0,19.875 16.125,36 36,36h120c19.875,0 36,-16.125 36,-36v-120c0,-19.875 -16.125,-36 -36,-36zM59.36539,162.98077h-29.82693l-0.17307,-89.30769h29.82692zM43.70192,61.99038h-0.17308c-9.75,0 -16.03846,-6.72115 -16.03846,-15.08653c0,-8.56731 6.49039,-15.0577 16.41347,-15.0577c9.92308,0 16.00961,6.49038 16.21153,15.0577c0,8.36538 -6.31731,15.08653 -16.41346,15.08653zM162.77885,162.98077h-30.08654v-48.51923c0,-11.74039 -3.11538,-19.73077 -13.61538,-19.73077c-8.01923,0 -12.34615,5.39423 -14.42308,10.61538c-0.77885,1.875 -0.98077,4.44231 -0.98077,7.06731v50.56731h-30.23077l-0.17308,-89.30769h30.23077l0.17308,12.60577c3.86538,-5.97116 10.29808,-14.42308 25.70192,-14.42308c19.09616,0 33.37501,12.46154 33.37501,39.25961v51.86539z"></path></g></g></g></svg>
</a>
        <a class="floating-header-share-tw" href="http://www.reddit.com/submit?url=https://smirnov-am.github.io/ci-ci-pipeline-for-aws-lambda-python-runtime/&title=CI%2FCD%20%20pipeline%20for%20AWS%20Lambda%20(Python%20runtime)" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14.238 15.348c.085.084.085.221 0 .306-.465.462-1.194.687-2.231.687l-.008-.002-.008.002c-1.036 0-1.766-.225-2.231-.688-.085-.084-.085-.221 0-.305.084-.084.222-.084.307 0 .379.377 1.008.561 1.924.561l.008.002.008-.002c.915 0 1.544-.184 1.924-.561.085-.084.223-.084.307 0zm-3.44-2.418c0-.507-.414-.919-.922-.919-.509 0-.923.412-.923.919 0 .506.414.918.923.918.508.001.922-.411.922-.918zm13.202-.93c0 6.627-5.373 12-12 12s-12-5.373-12-12 5.373-12 12-12 12 5.373 12 12zm-5-.129c0-.851-.695-1.543-1.55-1.543-.417 0-.795.167-1.074.435-1.056-.695-2.485-1.137-4.066-1.194l.865-2.724 2.343.549-.003.034c0 .696.569 1.262 1.268 1.262.699 0 1.267-.566 1.267-1.262s-.568-1.262-1.267-1.262c-.537 0-.994.335-1.179.804l-2.525-.592c-.11-.027-.223.037-.257.145l-.965 3.038c-1.656.02-3.155.466-4.258 1.181-.277-.255-.644-.415-1.05-.415-.854.001-1.549.693-1.549 1.544 0 .566.311 1.056.768 1.325-.03.164-.05.331-.05.5 0 2.281 2.805 4.137 6.253 4.137s6.253-1.856 6.253-4.137c0-.16-.017-.317-.044-.472.486-.261.82-.766.82-1.353zm-4.872.141c-.509 0-.922.412-.922.919 0 .506.414.918.922.918s.922-.412.922-.918c0-.507-.413-.919-.922-.919z"/></svg></a>
        <a class="floating-header-share-fb" href="https://news.ycombinator.com/submitlink?u=https://smirnov-am.github.io/ci-ci-pipeline-for-aws-lambda-python-runtime/&t=CI%2FCD%20%20pipeline%20for%20AWS%20Lambda%20(Python%20runtime)" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
width="100" height="100"
viewBox="0 0 50 50"
style=" fill:#000000;">    <path d="M 4 4 L 4 5 L 4 46 L 46 46 L 46 4 L 4 4 z M 6 6 L 44 6 L 44 44 L 6 44 L 6 6 z M 12.652344 13 L 14.238281 15.947266 L 21 28.503906 L 21 36 L 21 38 L 23 38 L 27 38 L 29 38 L 29 36 L 29 28.503906 L 35.761719 15.947266 L 37.347656 13 L 34 13 L 30.824219 13 L 29.664062 13 L 29.087891 14.007812 L 25 21.158203 L 20.912109 14.007812 L 20.337891 13 L 19.177734 13 L 16 13 L 12.652344 13 z M 16 15 L 19.175781 15 L 25 25.1875 L 30.824219 15 L 34 15 L 27 28 L 27 36 L 23 36 L 23 28 L 16 15 z"></path></svg></a>
    </div>
    <progress id="reading-progress" class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://smirnov-am.github.io">smirnov-am.github.io</a> &copy; 2019</section>
                <nav class="site-footer-nav">
                    <a href="https://smirnov-am.github.io">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>


    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/built/jquery.fitvids.js?v=228a7463dd"></script>


    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('#reading-progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();

});
</script>


    

</body>
</html>
