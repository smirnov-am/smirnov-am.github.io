<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Calculating enterprise value with Python and Pandas (part 1) | Alexey Smirnov</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Calculating enterprise value with Python and Pandas (part 1)" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/2019/02/07/company-evaluation-pt1.html" />
<meta property="og:url" content="http://localhost:4000/2019/02/07/company-evaluation-pt1.html" />
<meta property="og:site_name" content="Alexey Smirnov" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-02-07T00:00:00+01:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2019/02/07/company-evaluation-pt1.html","headline":"Calculating enterprise value with Python and Pandas (part 1)","datePublished":"2019-02-07T00:00:00+01:00","dateModified":"2019-02-07T00:00:00+01:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/02/07/company-evaluation-pt1.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Alexey Smirnov" /></head>
<body><header class="site-header" role="banner">

    <div class="wrapper"><a class="site-title" rel="author" href="/">Alexey Smirnov</a><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger" />
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewBox="0 0 18 15" width="18px" height="15px">
                <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
              </svg>
            </span>
          </label>
  
        <div class="trigger">
          <a class="page-link" href="https://www.linkedin.com/in/smirnovam/">Linkedin</a>
          <a class="page-link" href="https://github.com/smirnov-am">GitHub</a>
        </div>
        </nav></div>
  </header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Calculating enterprise value with Python and Pandas (part 1)</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-02-07T00:00:00+01:00" itemprop="datePublished">Feb 7, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><img src="/assets/img/pyfinmod2.png" alt="mascot" height="300px" /></p>

<h1 id="enterprise-value">Enterprise Value</h1>
<p>Value of the enterprise may be used to find out whether price of company
 equity - a share - is worth what market offers.
 It’s also used in acquisitions to get the price of the company as a whole.</p>

<p>In this post I’ll cover 3 methods of Enterprise Value calculations:</p>
<ul>
  <li>using accounting book</li>
  <li>efficient market approach</li>
  <li>discounted cash flows (DCF)</li>
</ul>

<p>The latter one - DCF - is a complex topic. So here I’ll cover the first
part - getting future cash flows from cash flow statement. WACC and
resulting calculations as well as market engineering and sensitivity
analysis will be covered in later posts.</p>

<h2 id="methods-of-corporate-valuation">Methods of corporate valuation</h2>

<h3 id="1-using-accounting-book">1. Using accounting book</h3>

<p>The idea behind this method is to rewrite balance sheet in a way that all
productive items are on the left side and financial items are on the right.
Productive items include net working capital, property,
<a href="https://www.investopedia.com/terms/i/intangibleasset.asp">intangible assets</a>
(copyright, goodwill) and other fixed assets.
Net working capital is defined as <strong>accounts receivable</strong> + <strong>inventories</strong> -
<strong>accounts payable</strong> - <strong>taxes payable</strong>. Liquid assets such as cash will go on the
right side to net financial debt.</p>

<p>So on the right-hand - financial side - we will have net financial debt
(all short and long term debt minus liquid cash), other liabilities such as
pensions, equity.</p>

<p>After moving all the items both columns should be in balance -
column sums are equal and represent company value.</p>

<p>I failed to find a reliable API to get company’s balance sheet so I made a Yahoo Finance parser.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyfinmod.yahoo_finance</span> <span class="kn">import</span> <span class="n">YahooFinanceParser</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">YahooFinanceParser</span><span class="p">(</span><span class="s">'AAPL'</span><span class="p">,</span> <span class="s">'balance-sheet'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">get_dataframe</span><span class="p">()</span>
</code></pre></div></div>
<p>The resulting dataframe with AAPL balance sheet is:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">row name</th>
      <th style="text-align: right">2018-09-29</th>
      <th style="text-align: right">2017-09-30</th>
      <th style="text-align: right">2016-09-24</th>
      <th style="text-align: right">2015-09-26</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Cash And Cash Equivalents</td>
      <td style="text-align: right">2.5913e+10</td>
      <td style="text-align: right">2.0289e+10</td>
      <td style="text-align: right">2.0484e+10</td>
      <td style="text-align: right">2.112e+10</td>
    </tr>
    <tr>
      <td style="text-align: left">Short Term Investments</td>
      <td style="text-align: right">4.0388e+10</td>
      <td style="text-align: right">5.3892e+10</td>
      <td style="text-align: right">4.6671e+10</td>
      <td style="text-align: right">2.0481e+10</td>
    </tr>
    <tr>
      <td style="text-align: left">Net Receivables</td>
      <td style="text-align: right">4.8995e+10</td>
      <td style="text-align: right">3.5673e+10</td>
      <td style="text-align: right">2.9299e+10</td>
      <td style="text-align: right">3.0343e+10</td>
    </tr>
    <tr>
      <td style="text-align: left">Inventory</td>
      <td style="text-align: right">3.956e+09</td>
      <td style="text-align: right">4.855e+09</td>
      <td style="text-align: right">2.132e+09</td>
      <td style="text-align: right">2.349e+09</td>
    </tr>
    <tr>
      <td style="text-align: left">Other Current Assets</td>
      <td style="text-align: right">1.2087e+10</td>
      <td style="text-align: right">1.3936e+10</td>
      <td style="text-align: right">8.283e+09</td>
      <td style="text-align: right">1.4691e+10</td>
    </tr>
    <tr>
      <td style="text-align: left">Total Current Assets</td>
      <td style="text-align: right">1.31339e+11</td>
      <td style="text-align: right">1.28645e+11</td>
      <td style="text-align: right">1.06869e+11</td>
      <td style="text-align: right">8.9378e+10</td>
    </tr>
    <tr>
      <td style="text-align: left">Long Term Investments</td>
      <td style="text-align: right">1.70799e+11</td>
      <td style="text-align: right">1.94714e+11</td>
      <td style="text-align: right">1.7043e+11</td>
      <td style="text-align: right">1.64065e+11</td>
    </tr>
    <tr>
      <td style="text-align: left">…</td>
      <td style="text-align: right">…</td>
      <td style="text-align: right">…</td>
      <td style="text-align: right">…</td>
      <td style="text-align: right">…</td>
    </tr>
  </tbody>
</table>

<p>To calculate enterprise value <code class="highlighter-rouge">get_enterprise_value</code> function can be used.
And I found interesting thing about Yahoo Finance page that there is no
<code class="highlighter-rouge">Taxes Payable</code> row and <code class="highlighter-rouge">Total Current Liabilities</code> do not sum up
to <code class="highlighter-rouge">Accounts Payable</code> + <code class="highlighter-rouge">Short/Current Long Term Debt</code> + <code class="highlighter-rouge">Other Current Liabilities</code>. So my
calculations might be not very precise.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyfinmod.yahoo_finance</span> <span class="kn">import</span> <span class="n">YahooFinanceParser</span>
<span class="kn">from</span> <span class="nn">pyfinmod.ev</span> <span class="kn">import</span> <span class="n">get_enterprise_value</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">YahooFinanceParser</span><span class="p">(</span><span class="s">'AAPL'</span><span class="p">,</span> <span class="s">'balance-sheet'</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_dataframe</span><span class="p">()</span>
<span class="n">get_enterprise_value</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div></div>

<p>The result is:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">2018</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">29</span>    <span class="mi">271960000000</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">30</span>    <span class="mi">298811000000</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>    <span class="mi">233939000000</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>    <span class="mi">202067000000</span>
</code></pre></div></div>

<p>Also there is a function to calcualte net working capital:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyfinmod.yahoo_finance</span> <span class="kn">import</span> <span class="n">YahooFinanceParser</span>
<span class="kn">from</span> <span class="nn">pyfinmod.ev</span> <span class="kn">import</span> <span class="n">get_net_working_capital</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">YahooFinanceParser</span><span class="p">(</span><span class="s">'AAPL'</span><span class="p">,</span> <span class="s">'balance-sheet'</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">get_dataframe</span><span class="p">()</span>
<span class="n">get_net_working_capital</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">2018</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">29</span>   <span class="o">-</span><span class="mi">43167000000</span>
<span class="mi">2017</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">30</span>   <span class="o">-</span><span class="mi">41813000000</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>   <span class="o">-</span><span class="mi">14106000000</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>   <span class="o">-</span><span class="mi">13737000000</span>
</code></pre></div></div>

<h3 id="2-efficient-market-approach">2. Efficient market approach</h3>

<p>If the company is publicly traded we can calculate market cap: number of
shares multiplied by the share price. This is equity. It’s different from
the equity in the liabilities column from the balance sheet which
represents the initial amount of money invested in a business
(maybe not initial if the profits were reinvested).</p>

<p>Efficient market approach says that we need to substitute equity from
rewritten balance sheet as in previous approach with the one defined by the market.
Here lies the explanation of the name of the approach - market with many
participants trading company’s shares who have same information give the most
accurate evaluation of the company.</p>

<p>After doing the substitution new balance sheet is not in balance. In that
case net working capital is recalculated to re-balance it. The new column sum is
the company’s value</p>

<p>As we can see in September 2018 AAPL value was 271.960B according to the balance sheet.
But market cap it as 1.086T.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyfinmod.yahoo_finance</span> <span class="kn">import</span> <span class="n">YahooFinanceParser</span>
<span class="kn">from</span> <span class="nn">pyfinmod.ev</span> <span class="kn">import</span> <span class="n">get_enterprise_value_efficient_market</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">YahooFinanceParser</span><span class="p">(</span><span class="s">'AAPL'</span><span class="p">,</span> <span class="s">'balance-sheet'</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">parse</span><span class="o">.</span><span class="n">get_dataframe</span><span class="p">()</span>
<span class="n">get_enterprise_value_efficient_market</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="mi">1086</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">)</span>
</code></pre></div></div>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">2017</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">30</span>    <span class="mi">1250764000000</span>
<span class="mi">2016</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>    <span class="mi">1191690000000</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>    <span class="mi">1168712000000</span>
</code></pre></div></div>
<p>This is a resulting enterprise value given market cap.</p>

<h3 id="3-discounted-cash-flows">3. Discounted cash flows</h3>

<p>This approach aims to evaluate a company by its ability to generate money in future.
It uses two terms:
Future Cash Flows (<a href="https://www.investopedia.com/terms/f/freecashflow.asp">FCF</a>)
and Weighted Average Cost of Capital (<a href="https://www.investopedia.com/terms/w/wacc.asp">WACC</a>)</p>

<p>FCFs are defined as the cash created by the company’s operating activities.
WACC is the risk-adjusted discount rate appropriate to the risk of the FCFs.
And the value of the company is calculated as net present value of FCFs discounted
at WACC.</p>

<p>There is one assumption to this approach is that cash flows occur approximately
mid-year. In that case the formula fro enterprise value (EV) is:
<img src="http://www.sciweavers.org/tex2img.php?eq=EV%20%3D%20NPV%28FCF_%7Bi%7D%2C%20WACC%29%2A%281%20%2B%20WACC%29%5E%7B0.5%7D%20&amp;bc=White&amp;fc=Black&amp;im=jpg&amp;fs=12&amp;ff=arev&amp;edit=0" alt="dcfev" /></p>

<p>There are two steps in getting FCFs:</p>
<ul>
  <li>get historical FCFs either from pro forma or cash flow statements</li>
  <li>project FCFs to the future assuming growth percentages</li>
</ul>

<blockquote>
  <p>I’ll skip pro forma method for now</p>
</blockquote>

<h4 id="fcf-from-cash-flow-statement">FCF from cash flow statement</h4>
<p>We need to add up these rows from cash flow statement:</p>
<ul>
  <li>Total Cash Flow From Operating Activities</li>
  <li>Total Cash Flows From Investing Activities</li>
  <li>Add back after-tax net interest</li>
</ul>

<p>The latter is calculated as (1 - <strong>Income tax rate</strong>) * <strong>Cash paid for Interest</strong>.
<strong>Cash paid for interest</strong> is absolute value of <code class="highlighter-rouge">Interest Expense</code>.
<strong>Income tax rate</strong> equals <code class="highlighter-rouge">Income Tax Expense</code> / (<code class="highlighter-rouge">Net Income</code> + <code class="highlighter-rouge">Income Tax Expense</code>).</p>

<blockquote>
  <p><code class="highlighter-rouge">Income Tax Expense</code> and <code class="highlighter-rouge">Interest Expense</code> are taken from  income statement.
<code class="highlighter-rouge">Net Income</code> is taken from cash flow statement.</p>
</blockquote>

<p>Example:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from pyfinmod.ev import get_fcf_from_cscf
balance_sheet_parser = YahooFinanceParser('AAPL', 'balance-sheet')
balance_sheet = balance_sheet_parser.get_dataframe()

income_statement_parser = YahooFinanceParser('AAPL', 'income-statement')
income_statement = income_statement_parser.get_dataframe()

get_fcf_from_cscf(income_statement, cash_flow)
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2018-09-29    9.614571e+10
2017-09-30    1.953155e+10
2016-09-24    2.133789e+10
2015-09-26    2.553172e+10
</code></pre></div></div>

<p>In the next posts I’ll cover WACC calculation and DCF method usage.
Code is in the repo <a href="https://github.com/smirnov-am/pyfinmod">here</a>.
Feel free to reach out to me over <a href="https://www.linkedin.com/in/smirnovam/">LinkedIn</a>
for any questions or corrections.</p>

  </div><a class="u-url" href="/2019/02/07/company-evaluation-pt1.html" hidden></a>
</article>

      </div>
    </main></body>

</html>
